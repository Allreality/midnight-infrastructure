from flask import Flask, request, jsonify
from flask_cors import CORS
from datetime import datetime
import os
import json

app = Flask(__name__)
CORS(app)

# Import all routes
from routes.health import bp as health_bp
from routes.agents import agents_bp
from routes.cid import cid_bp
from routes.donations import donations_bp
from routes.claims import claims_bp
from routes.claims_agents import claims_agents_bp
from routes.claims_eligibility import claims_eligibility_bp
from routes.claims_log import claims_log_bp
from routes.claims_stats import claims_stats_bp
from routes.claims_verify import claims_verify_bp
from routes.registry_routes import registry_bp
from routes.knowledge import knowledge_bp
from routes.scraper import scraper_bp
from routes.manual_ingest import manual_bp

# Register blueprints
app.register_blueprint(health_bp)
app.register_blueprint(agents_bp)
app.register_blueprint(cid_bp)
app.register_blueprint(donations_bp)
app.register_blueprint(claims_bp)
app.register_blueprint(claims_agents_bp)
app.register_blueprint(claims_eligibility_bp)
app.register_blueprint(claims_log_bp)
app.register_blueprint(claims_stats_bp)
app.register_blueprint(claims_verify_bp)
app.register_blueprint(registry_bp)
app.register_blueprint(knowledge_bp)
app.register_blueprint(scraper_bp)
app.register_blueprint(manual_bp)

if __name__ == "__main__":
    print("=" * 60)
    print("ğŸŒ™ Midnight Infrastructure - Airdrop Agent System")
    print("=" * 60)
    print("ğŸŒ URL: http://localhost:5002")
    print("ğŸ¤– Agents: Lookup, Eligibility, Claim")
    print("ğŸ’° Wallet: addr1q9np4m2eg4xtr8...")
    print("=" * 60)
    print()
    app.run(host='0.0.0.0', port=5002, debug=False)
